backend = "glx";
vsync = true;
glx-use-copysubbuffer-mesa = true;

glx-copy-from-front = true;
glx-swap-method = 2;
xrender-sync = true;
xrender-sync-fence = true;

inactive-opacity = 0.95;
active-opacity = 1.0;

opacity-rule = [
  "85:class_g = 'kitty'"
];

# Blur background (frosted glass effect - prevents seeing through to other windows)
blur-background = true;
blur-method = "dual_kawase";
blur-strength = 5;
blur-background-exclude = [
  "class_g = 'slop'",
  "_GTK_FRAME_EXTENTS@:c"
];

# Fade animations
fading = true;
fade-in-step = 0.05;
fade-out-step = 0.05;
fade-delta = 5;

# Animation settings (picom v12+)
animations = ({
  triggers = ["open", "show"];
  opacity = {
    timing = "0.2s cubic-bezier(0.25, 0.1, 0.25, 1)";
    start = 0;
    end = "window-raw-opacity-before";
  };
  offset-y = {
    timing = "0.2s cubic-bezier(0.25, 0.1, 0.25, 1)";
    start = "-20";
    end = 0;
  };
},
{
  triggers = ["close", "hide"];
  opacity = {
    timing = "0.15s ease-out";
    start = "window-raw-opacity-before";
    end = 0;
  };
});